/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package graphicinterface;

import java.io.InputStream;
import java.util.HashMap;
import java.util.Map;
import javax.swing.ImageIcon;
import javax.swing.JDialog;
import librarian.Librarian;
import librarian.LibrarianDao;
import net.sf.jasperreports.engine.JasperFillManager;
import net.sf.jasperreports.engine.JasperPrint;
import net.sf.jasperreports.view.JasperViewer;
import reader.ReaderDao;
import repository.DbConnection;
import user.User;

/**
 *
 * @author Claudio Alcantara &lt;claudio.alcantara at ifnmg.edi.br&gt;
 */
public class TelaPrincipal extends javax.swing.JFrame {
    
    User user;
    /**
     * Creates new form TelaPrincipal
     */
    public TelaPrincipal() {
        initComponents();
        setLocationRelativeTo(null);
    }
    
    LoginScreen loginScreen;

    TelaPrincipal(User user, LoginScreen loginScreen) {
        initComponents();
        setLocationRelativeTo(null);
        this.loginScreen = loginScreen;
        this.user = user;
        if(new ReaderDao().findById(user.getId()) != null ){
            mnuPrincipalCadBibli.setEnabled(false);
            mnuPrincipalCadLeitor.setEnabled(false);
            mnuPrincipalCadExemp.setEnabled(false);
            mnuPrincipalEdtBibli.setEnabled(false);
            mnuPrincipalEdtLeitor.setEnabled(false);
            mnuPrincipalEdtLivro.setEnabled(false);
            mnuPrincipalEdtExemp.setVisible(false);
            mnuPrincipalEmpNovo.setEnabled(false);
            mnuPrincipalEmpDev.setEnabled(false);
            mnuPrincipalCadAdmin.setEnabled(false);
            mnuPrincipalEdtAdmin.setVisible(false);
            mnuTelaPrincipalRelAdm.setEnabled(false);
            mnuTelaPrincipalRelBibli.setEnabled(false);
            mnuTelaPrincipalRelEmp.setEnabled(false);
            mnuTelaPrincipalRelExemp.setEnabled(false);
            mnuTelaPrincipalRelLeitores.setEnabled(false);
            mnuTelaPrincipalRelLivros.setEnabled(false);
            mnuTelaPrincipalRelAdm.setEnabled(false);
            RelComent.setEnabled(false);
            
        }else if(new LibrarianDao().findById(user.getId()) != null){
            mnuPrincipalCadBibli.setEnabled(false);
            mnuPrincipalCadLeitor.setEnabled(false);
            mnuPrincipalEdtBibli.setEnabled(false);
            mnuPrincipalEdtLeitor.setEnabled(false);
            mnuPrincipalEdtAdmin.setVisible(false);
            mnuPrincipalCadAdmin.setEnabled(false);
            mnuTelaPrincipalRelAdm.setEnabled(false);
            mnuTelaPrincipalRelBibli.setEnabled(false);
            mnuTelaPrincipalRelEmp.setEnabled(false);
            mnuTelaPrincipalRelExemp.setEnabled(false);
            mnuTelaPrincipalRelLeitores.setEnabled(false);
            mnuTelaPrincipalRelLivros.setEnabled(false);
            mnuTelaPrincipalRelAdm.setEnabled(false);
            RelComent.setEnabled(false);
        }
        else
            mnuPrincipalEmpNovo.setVisible(false);
    }
    public javax.swing.JPanel getPrincipalPnl(){
        return pnlTelaPrincipal;
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        jProgressBar1 = new javax.swing.JProgressBar();
        jMenuBar2 = new javax.swing.JMenuBar();
        jMenu3 = new javax.swing.JMenu();
        jMenu4 = new javax.swing.JMenu();
        jMenuBar3 = new javax.swing.JMenuBar();
        jMenu5 = new javax.swing.JMenu();
        jMenu6 = new javax.swing.JMenu();
        jMenuBar4 = new javax.swing.JMenuBar();
        jMenu7 = new javax.swing.JMenu();
        jMenu8 = new javax.swing.JMenu();
        jMenuBar5 = new javax.swing.JMenuBar();
        jMenu9 = new javax.swing.JMenu();
        jMenu10 = new javax.swing.JMenu();
        jMenu21 = new javax.swing.JMenu();
        jMenuItem1 = new javax.swing.JMenuItem();
        pnlTelaPrincipal = new javax.swing.JPanel();
        jMenuBar1 = new javax.swing.JMenuBar();
        jMenu1 = new javax.swing.JMenu();
        jMenuItem2 = new javax.swing.JMenuItem();
        Cadastrar = new javax.swing.JMenu();
        mnuPrincipalCadLeitor = new javax.swing.JMenuItem();
        mnuPrincipalCadBibli = new javax.swing.JMenuItem();
        mnuPrincipalCadAdmin = new javax.swing.JMenuItem();
        mnuPrincipalCadExemp = new javax.swing.JMenuItem();
        Editar = new javax.swing.JMenu();
        mnuPrincipalEdtLeitor = new javax.swing.JMenuItem();
        mnuPrincipalEdtBibli = new javax.swing.JMenuItem();
        mnuPrincipalEdtAdmin = new javax.swing.JMenuItem();
        mnuPrincipalEdtLivro = new javax.swing.JMenuItem();
        mnuPrincipalEdtExemp = new javax.swing.JMenuItem();
        Exibir = new javax.swing.JMenu();
        jMenuItem5 = new javax.swing.JMenuItem();
        Emprestimo = new javax.swing.JMenu();
        mnuPrincipalEmpNovo = new javax.swing.JMenuItem();
        mnuPrincipalEmpDev = new javax.swing.JMenuItem();
        mnuPrincipalEmpHist = new javax.swing.JMenuItem();
        jMenu12 = new javax.swing.JMenu();
        mnuTelaPrincipalRelLivros = new javax.swing.JMenuItem();
        mnuTelaPrincipalRelLeitores = new javax.swing.JMenuItem();
        mnuTelaPrincipalRelBibli = new javax.swing.JMenuItem();
        mnuTelaPrincipalRelAdm = new javax.swing.JMenuItem();
        mnuTelaPrincipalRelExemp = new javax.swing.JMenuItem();
        mnuTelaPrincipalRelEmp = new javax.swing.JMenuItem();
        RelComent = new javax.swing.JMenuItem();

        jMenu3.setText("File");
        jMenuBar2.add(jMenu3);

        jMenu4.setText("Edit");
        jMenuBar2.add(jMenu4);

        jMenu5.setText("File");
        jMenuBar3.add(jMenu5);

        jMenu6.setText("Edit");
        jMenuBar3.add(jMenu6);

        jMenu7.setText("File");
        jMenuBar4.add(jMenu7);

        jMenu8.setText("Edit");
        jMenuBar4.add(jMenu8);

        jMenu9.setText("File");
        jMenuBar5.add(jMenu9);

        jMenu10.setText("Edit");
        jMenuBar5.add(jMenu10);

        jMenu21.setText("jMenu21");

        jMenuItem1.setText("jMenuItem1");

        setDefaultCloseOperation(javax.swing.WindowConstants.DISPOSE_ON_CLOSE);
        setLocation(new java.awt.Point(0, 0));
        setName("tlPrincipal"); // NOI18N
        addWindowListener(new java.awt.event.WindowAdapter() {
            public void windowClosed(java.awt.event.WindowEvent evt) {
                formWindowClosed(evt);
            }
        });

        javax.swing.GroupLayout pnlTelaPrincipalLayout = new javax.swing.GroupLayout(pnlTelaPrincipal);
        pnlTelaPrincipal.setLayout(pnlTelaPrincipalLayout);
        pnlTelaPrincipalLayout.setHorizontalGroup(
            pnlTelaPrincipalLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 787, Short.MAX_VALUE)
        );
        pnlTelaPrincipalLayout.setVerticalGroup(
            pnlTelaPrincipalLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 467, Short.MAX_VALUE)
        );

        jMenu1.setText("Arquivo");

        jMenuItem2.setText("Sair");
        jMenuItem2.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jMenuItem2ActionPerformed(evt);
            }
        });
        jMenu1.add(jMenuItem2);

        jMenuBar1.add(jMenu1);

        Cadastrar.setText("Cadastrar");

        mnuPrincipalCadLeitor.setAccelerator(javax.swing.KeyStroke.getKeyStroke(java.awt.event.KeyEvent.VK_F1, 0));
        mnuPrincipalCadLeitor.setIcon(new ImageIcon(getClass().getResource("/aluno.png")));
        mnuPrincipalCadLeitor.setText("Cadastrar leitor");
        mnuPrincipalCadLeitor.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                mnuPrincipalCadLeitorActionPerformed(evt);
            }
        });
        Cadastrar.add(mnuPrincipalCadLeitor);

        mnuPrincipalCadBibli.setAccelerator(javax.swing.KeyStroke.getKeyStroke(java.awt.event.KeyEvent.VK_F2, 0));
        mnuPrincipalCadBibli.setIcon(new ImageIcon(getClass().getResource("/bibli.png")));
        mnuPrincipalCadBibli.setText("Cadastrar bibliotec√°rio");
        mnuPrincipalCadBibli.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                mnuPrincipalCadBibliActionPerformed(evt);
            }
        });
        Cadastrar.add(mnuPrincipalCadBibli);

        mnuPrincipalCadAdmin.setAccelerator(javax.swing.KeyStroke.getKeyStroke(java.awt.event.KeyEvent.VK_F3, 0));
        mnuPrincipalCadAdmin.setText("Cadastrar administrador");
        mnuPrincipalCadAdmin.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                mnuPrincipalCadAdminActionPerformed(evt);
            }
        });
        Cadastrar.add(mnuPrincipalCadAdmin);

        mnuPrincipalCadExemp.setAccelerator(javax.swing.KeyStroke.getKeyStroke(java.awt.event.KeyEvent.VK_F4, 0));
        mnuPrincipalCadExemp.setIcon(new ImageIcon(getClass().getResource("/cadlivro.png")));
        mnuPrincipalCadExemp.setText("Cadastrar exemplar");
        mnuPrincipalCadExemp.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                mnuPrincipalCadExempActionPerformed(evt);
            }
        });
        Cadastrar.add(mnuPrincipalCadExemp);

        jMenuBar1.add(Cadastrar);

        Editar.setText("Editar");

        mnuPrincipalEdtLeitor.setAccelerator(javax.swing.KeyStroke.getKeyStroke(java.awt.event.KeyEvent.VK_F5, 0));
        mnuPrincipalEdtLeitor.setText("Editar leitor");
        mnuPrincipalEdtLeitor.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                mnuPrincipalEdtLeitorActionPerformed(evt);
            }
        });
        Editar.add(mnuPrincipalEdtLeitor);

        mnuPrincipalEdtBibli.setAccelerator(javax.swing.KeyStroke.getKeyStroke(java.awt.event.KeyEvent.VK_F6, 0));
        mnuPrincipalEdtBibli.setText("Editar bibliotecario");
        mnuPrincipalEdtBibli.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                mnuPrincipalEdtBibliActionPerformed(evt);
            }
        });
        Editar.add(mnuPrincipalEdtBibli);

        mnuPrincipalEdtAdmin.setAccelerator(javax.swing.KeyStroke.getKeyStroke(java.awt.event.KeyEvent.VK_F7, 0));
        mnuPrincipalEdtAdmin.setText("Editar administrador");
        mnuPrincipalEdtAdmin.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                mnuPrincipalEdtAdminActionPerformed(evt);
            }
        });
        Editar.add(mnuPrincipalEdtAdmin);

        mnuPrincipalEdtLivro.setAccelerator(javax.swing.KeyStroke.getKeyStroke(java.awt.event.KeyEvent.VK_F8, 0));
        mnuPrincipalEdtLivro.setText("Editar livro");
        mnuPrincipalEdtLivro.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                mnuPrincipalEdtLivroActionPerformed(evt);
            }
        });
        Editar.add(mnuPrincipalEdtLivro);

        mnuPrincipalEdtExemp.setAccelerator(javax.swing.KeyStroke.getKeyStroke(java.awt.event.KeyEvent.VK_F9, 0));
        mnuPrincipalEdtExemp.setText("Editar exemplar");
        Editar.add(mnuPrincipalEdtExemp);

        jMenuBar1.add(Editar);

        Exibir.setText("Exibir");

        jMenuItem5.setAccelerator(javax.swing.KeyStroke.getKeyStroke(java.awt.event.KeyEvent.VK_L, java.awt.event.InputEvent.CTRL_DOWN_MASK));
        jMenuItem5.setText("Exibir livros");
        jMenuItem5.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jMenuItem5ActionPerformed(evt);
            }
        });
        Exibir.add(jMenuItem5);

        jMenuBar1.add(Exibir);

        Emprestimo.setText("Emprestimo");

        mnuPrincipalEmpNovo.setAccelerator(javax.swing.KeyStroke.getKeyStroke(java.awt.event.KeyEvent.VK_N, java.awt.event.InputEvent.CTRL_DOWN_MASK));
        mnuPrincipalEmpNovo.setText("Novo");
        mnuPrincipalEmpNovo.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                mnuPrincipalEmpNovoActionPerformed(evt);
            }
        });
        Emprestimo.add(mnuPrincipalEmpNovo);

        mnuPrincipalEmpDev.setAccelerator(javax.swing.KeyStroke.getKeyStroke(java.awt.event.KeyEvent.VK_D, java.awt.event.InputEvent.CTRL_DOWN_MASK));
        mnuPrincipalEmpDev.setText("Devolver");
        mnuPrincipalEmpDev.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                mnuPrincipalEmpDevActionPerformed(evt);
            }
        });
        Emprestimo.add(mnuPrincipalEmpDev);

        mnuPrincipalEmpHist.setAccelerator(javax.swing.KeyStroke.getKeyStroke(java.awt.event.KeyEvent.VK_H, java.awt.event.InputEvent.CTRL_DOWN_MASK));
        mnuPrincipalEmpHist.setText("Ver historico");
        mnuPrincipalEmpHist.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                mnuPrincipalEmpHistActionPerformed(evt);
            }
        });
        Emprestimo.add(mnuPrincipalEmpHist);

        jMenuBar1.add(Emprestimo);

        jMenu12.setText("Relatorio");

        mnuTelaPrincipalRelLivros.setAccelerator(javax.swing.KeyStroke.getKeyStroke(java.awt.event.KeyEvent.VK_1, java.awt.event.InputEvent.CTRL_DOWN_MASK));
        mnuTelaPrincipalRelLivros.setText("Relatorio de livros");
        mnuTelaPrincipalRelLivros.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                mnuTelaPrincipalRelLivrosActionPerformed(evt);
            }
        });
        jMenu12.add(mnuTelaPrincipalRelLivros);

        mnuTelaPrincipalRelLeitores.setAccelerator(javax.swing.KeyStroke.getKeyStroke(java.awt.event.KeyEvent.VK_2, java.awt.event.InputEvent.CTRL_DOWN_MASK));
        mnuTelaPrincipalRelLeitores.setText("Relatorio de leitores");
        mnuTelaPrincipalRelLeitores.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                mnuTelaPrincipalRelLeitoresActionPerformed(evt);
            }
        });
        jMenu12.add(mnuTelaPrincipalRelLeitores);

        mnuTelaPrincipalRelBibli.setAccelerator(javax.swing.KeyStroke.getKeyStroke(java.awt.event.KeyEvent.VK_3, java.awt.event.InputEvent.CTRL_DOWN_MASK));
        mnuTelaPrincipalRelBibli.setText("Relat√≥rio de bibliotecarios");
        mnuTelaPrincipalRelBibli.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                mnuTelaPrincipalRelBibliActionPerformed(evt);
            }
        });
        jMenu12.add(mnuTelaPrincipalRelBibli);

        mnuTelaPrincipalRelAdm.setAccelerator(javax.swing.KeyStroke.getKeyStroke(java.awt.event.KeyEvent.VK_4, java.awt.event.InputEvent.CTRL_DOWN_MASK));
        mnuTelaPrincipalRelAdm.setText("Relat√≥rio de administradores");
        mnuTelaPrincipalRelAdm.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                mnuTelaPrincipalRelAdmActionPerformed(evt);
            }
        });
        jMenu12.add(mnuTelaPrincipalRelAdm);

        mnuTelaPrincipalRelExemp.setAccelerator(javax.swing.KeyStroke.getKeyStroke(java.awt.event.KeyEvent.VK_5, java.awt.event.InputEvent.CTRL_DOWN_MASK));
        mnuTelaPrincipalRelExemp.setText("Relar√≥rio de exemplares");
        mnuTelaPrincipalRelExemp.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                mnuTelaPrincipalRelExempActionPerformed(evt);
            }
        });
        jMenu12.add(mnuTelaPrincipalRelExemp);

        mnuTelaPrincipalRelEmp.setAccelerator(javax.swing.KeyStroke.getKeyStroke(java.awt.event.KeyEvent.VK_6, java.awt.event.InputEvent.CTRL_DOWN_MASK));
        mnuTelaPrincipalRelEmp.setText("Relat√≥rio de emprestimos");
        mnuTelaPrincipalRelEmp.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                mnuTelaPrincipalRelEmpActionPerformed(evt);
            }
        });
        jMenu12.add(mnuTelaPrincipalRelEmp);

        RelComent.setAccelerator(javax.swing.KeyStroke.getKeyStroke(java.awt.event.KeyEvent.VK_7, java.awt.event.InputEvent.CTRL_DOWN_MASK));
        RelComent.setText("Relatorio de comentarios");
        RelComent.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                RelComentActionPerformed(evt);
            }
        });
        jMenu12.add(RelComent);

        jMenuBar1.add(jMenu12);

        setJMenuBar(jMenuBar1);

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(pnlTelaPrincipal, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(pnlTelaPrincipal, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
        );

        pack();
    }// </editor-fold>//GEN-END:initComponents

    private void formWindowClosed(java.awt.event.WindowEvent evt) {//GEN-FIRST:event_formWindowClosed
        loginScreen.setVisible(true);
        //setDefaultCloseOperation(DISPOSE_ON_CLOSE);
    }//GEN-LAST:event_formWindowClosed

    private void jMenuItem5ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jMenuItem5ActionPerformed
        ListarLivros listarLivros;
            listarLivros = ListarLivros.getInstance(this, 0, user);
        pnlTelaPrincipal.add(listarLivros);
        listarLivros.setVisible(true);
    }//GEN-LAST:event_jMenuItem5ActionPerformed

    private void mnuPrincipalCadExempActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_mnuPrincipalCadExempActionPerformed
        CadastrarAtualizarExemplar cadastrarAtualizarExemplar = CadastrarAtualizarExemplar.getInstance(this);
        pnlTelaPrincipal.add(cadastrarAtualizarExemplar);
        cadastrarAtualizarExemplar.setVisible(true);
    }//GEN-LAST:event_mnuPrincipalCadExempActionPerformed

    private void mnuPrincipalCadLeitorActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_mnuPrincipalCadLeitorActionPerformed
        CadastrarAtualizarUser cadastrarAtualizarUser = CadastrarAtualizarUser.getInstance(0);
        pnlTelaPrincipal.add(cadastrarAtualizarUser);
        cadastrarAtualizarUser.setVisible(true);
        
    }//GEN-LAST:event_mnuPrincipalCadLeitorActionPerformed

    private void mnuPrincipalCadBibliActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_mnuPrincipalCadBibliActionPerformed
        CadastrarAtualizarUser cadastrarAtualizarUser = CadastrarAtualizarUser.getInstance(1);
        pnlTelaPrincipal.add(cadastrarAtualizarUser);
        cadastrarAtualizarUser.setVisible(true);
        cadastrarAtualizarUser.toFront();
    }//GEN-LAST:event_mnuPrincipalCadBibliActionPerformed

    private void mnuPrincipalEdtLeitorActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_mnuPrincipalEdtLeitorActionPerformed
        ListarUser listarUser = ListarUser.getInstance(0, this);
        pnlTelaPrincipal.add(listarUser);
        listarUser.setVisible(true);
        listarUser.toFront();
    }//GEN-LAST:event_mnuPrincipalEdtLeitorActionPerformed

    private void mnuPrincipalEdtBibliActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_mnuPrincipalEdtBibliActionPerformed
        ListarUser listarUser = ListarUser.getInstance(1, this);
        pnlTelaPrincipal.add(listarUser);
        listarUser.setVisible(true);
        listarUser.toFront();
    }//GEN-LAST:event_mnuPrincipalEdtBibliActionPerformed

    private void mnuPrincipalEmpNovoActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_mnuPrincipalEmpNovoActionPerformed
       EmprestimoScreen emprestimoScreen = EmprestimoScreen.getInstance(new Librarian(user));
       pnlTelaPrincipal.add(emprestimoScreen);
       emprestimoScreen.setVisible(true);
       emprestimoScreen.toFront();
    }//GEN-LAST:event_mnuPrincipalEmpNovoActionPerformed

    private void mnuPrincipalEmpHistActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_mnuPrincipalEmpHistActionPerformed
        LoanHistory loanHistory = LoanHistory.getInstace(user, 0);
        pnlTelaPrincipal.add(loanHistory);
        loanHistory.setVisible(true);
        loanHistory.toFront();
    }//GEN-LAST:event_mnuPrincipalEmpHistActionPerformed

    private void mnuPrincipalCadAdminActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_mnuPrincipalCadAdminActionPerformed
        CadastrarAtualizarUser cadastrarAtualizarUser = CadastrarAtualizarUser.getInstance(2);
        pnlTelaPrincipal.add(cadastrarAtualizarUser);
        cadastrarAtualizarUser.setVisible(true);
    }//GEN-LAST:event_mnuPrincipalCadAdminActionPerformed

    private void mnuPrincipalEdtAdminActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_mnuPrincipalEdtAdminActionPerformed
        ListarUser listarUser = ListarUser.getInstance(2, this);
        pnlTelaPrincipal.add(listarUser);
        listarUser.setVisible(true);
        listarUser.toFront();
    }//GEN-LAST:event_mnuPrincipalEdtAdminActionPerformed

    private void mnuPrincipalEmpDevActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_mnuPrincipalEmpDevActionPerformed
        LoanHistory loanHistory = LoanHistory.getInstace(user, 1);
        pnlTelaPrincipal.add(loanHistory);
        loanHistory.setVisible(true);
        loanHistory.toFront();
    }//GEN-LAST:event_mnuPrincipalEmpDevActionPerformed

    private void mnuTelaPrincipalRelLivrosActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_mnuTelaPrincipalRelLivrosActionPerformed
        generateReport("RelatorioDeLivros.jasper", "Relatorio de livros");
    }//GEN-LAST:event_mnuTelaPrincipalRelLivrosActionPerformed

    private void mnuTelaPrincipalRelLeitoresActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_mnuTelaPrincipalRelLeitoresActionPerformed
        generateReport("RelatorioDeLeitores.jasper", "Relatorio de Leitores");
    }//GEN-LAST:event_mnuTelaPrincipalRelLeitoresActionPerformed

    private void mnuTelaPrincipalRelAdmActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_mnuTelaPrincipalRelAdmActionPerformed
        generateReport("RelatorioDeAdministradores.jasper", "Relatorio de Administradores");
    }//GEN-LAST:event_mnuTelaPrincipalRelAdmActionPerformed

    private void mnuTelaPrincipalRelBibliActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_mnuTelaPrincipalRelBibliActionPerformed
        generateReport("RelatorioDeBibliotecarios.jasper", "Relatorio de Bibliotecarios");
    }//GEN-LAST:event_mnuTelaPrincipalRelBibliActionPerformed

    private void mnuTelaPrincipalRelExempActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_mnuTelaPrincipalRelExempActionPerformed
        generateReport("RelatorioDeExemplares.jasper", "Relatorio de Exemplares");
    }//GEN-LAST:event_mnuTelaPrincipalRelExempActionPerformed

    private void mnuTelaPrincipalRelEmpActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_mnuTelaPrincipalRelEmpActionPerformed
        generateReport("RelatorioDeEmprestimos.jasper", "Relatorio de Emprestimos");
    }//GEN-LAST:event_mnuTelaPrincipalRelEmpActionPerformed

    private void mnuPrincipalEdtLivroActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_mnuPrincipalEdtLivroActionPerformed
        ListarLivros listarLivros = ListarLivros.getInstance(this, 2, user);
        pnlTelaPrincipal.add(listarLivros);
        listarLivros.setVisible(true);
        listarLivros.toFront();
    }//GEN-LAST:event_mnuPrincipalEdtLivroActionPerformed

    private void RelComentActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_RelComentActionPerformed
        ListarLivros listarLivros = ListarLivros.getInstance(this, 3, user);
        pnlTelaPrincipal.add(listarLivros);
        listarLivros.setVisible(true);
        listarLivros.toFront();
    }//GEN-LAST:event_RelComentActionPerformed

    private void jMenuItem2ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jMenuItem2ActionPerformed
        dispose();
        loginScreen.setVisible(true);
    }//GEN-LAST:event_jMenuItem2ActionPerformed

    private void generateReport(String jasperFile, String title){
        try(InputStream in = getClass().getResourceAsStream("/"+jasperFile)){
            JasperPrint jasperprint = JasperFillManager.fillReport(in, null, DbConnection.getConnection());
            JasperViewer jasperViewer = new JasperViewer(jasperprint, false);
            JDialog dialog = new JDialog(this);
            dialog.setContentPane(jasperViewer.getContentPane());
            dialog.setSize(jasperViewer.getSize());
            dialog.setTitle(title);
            dialog.setModal(true);
            dialog.setVisible(true);
        }catch(Exception ex){
            System.out.println(ex);
        }
    }
    
    


    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JMenu Cadastrar;
    private javax.swing.JMenu Editar;
    private javax.swing.JMenu Emprestimo;
    private javax.swing.JMenu Exibir;
    private javax.swing.JMenuItem RelComent;
    private javax.swing.JMenu jMenu1;
    private javax.swing.JMenu jMenu10;
    private javax.swing.JMenu jMenu12;
    private javax.swing.JMenu jMenu21;
    private javax.swing.JMenu jMenu3;
    private javax.swing.JMenu jMenu4;
    private javax.swing.JMenu jMenu5;
    private javax.swing.JMenu jMenu6;
    private javax.swing.JMenu jMenu7;
    private javax.swing.JMenu jMenu8;
    private javax.swing.JMenu jMenu9;
    private javax.swing.JMenuBar jMenuBar1;
    private javax.swing.JMenuBar jMenuBar2;
    private javax.swing.JMenuBar jMenuBar3;
    private javax.swing.JMenuBar jMenuBar4;
    private javax.swing.JMenuBar jMenuBar5;
    private javax.swing.JMenuItem jMenuItem1;
    private javax.swing.JMenuItem jMenuItem2;
    private javax.swing.JMenuItem jMenuItem5;
    private javax.swing.JProgressBar jProgressBar1;
    private javax.swing.JMenuItem mnuPrincipalCadAdmin;
    private javax.swing.JMenuItem mnuPrincipalCadBibli;
    private javax.swing.JMenuItem mnuPrincipalCadExemp;
    private javax.swing.JMenuItem mnuPrincipalCadLeitor;
    private javax.swing.JMenuItem mnuPrincipalEdtAdmin;
    private javax.swing.JMenuItem mnuPrincipalEdtBibli;
    private javax.swing.JMenuItem mnuPrincipalEdtExemp;
    private javax.swing.JMenuItem mnuPrincipalEdtLeitor;
    private javax.swing.JMenuItem mnuPrincipalEdtLivro;
    private javax.swing.JMenuItem mnuPrincipalEmpDev;
    private javax.swing.JMenuItem mnuPrincipalEmpHist;
    private javax.swing.JMenuItem mnuPrincipalEmpNovo;
    private javax.swing.JMenuItem mnuTelaPrincipalRelAdm;
    private javax.swing.JMenuItem mnuTelaPrincipalRelBibli;
    private javax.swing.JMenuItem mnuTelaPrincipalRelEmp;
    private javax.swing.JMenuItem mnuTelaPrincipalRelExemp;
    private javax.swing.JMenuItem mnuTelaPrincipalRelLeitores;
    private javax.swing.JMenuItem mnuTelaPrincipalRelLivros;
    private javax.swing.JPanel pnlTelaPrincipal;
    // End of variables declaration//GEN-END:variables
}
